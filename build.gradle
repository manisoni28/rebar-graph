


apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'java'

repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
}

group 'rebar.graph'

subprojects {

   buildscript {
	ext {
		springBootVersion = '2.1.2.RELEASE'
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

    apply plugin: 'java'
    apply plugin: 'maven'
    apply plugin: 'eclipse'
    apply plugin: 'eclipse'
    apply plugin: 'jacoco'
    apply plugin: 'checkstyle'
    configurations {
        all*.exclude group: 'commons-logging'
    }

    sourceCompatibility="1.8"
    targetCompatibility="1.8"
     repositories {
        mavenLocal()
        mavenCentral()
        jcenter()
        
    }
    checkstyle {
        configFile = file("${project.rootDir}/checkstyle.xml")
        configProperties = [ "suppressionFile" : file("${project.rootDir}/checkstyle-suppressions.xml")]
    }
    jacocoTestReport {
    reports {
        xml.enabled true
        csv.enabled false
    }
    }
    test {
        useJUnitPlatform()
        testLogging.showStandardStreams = true
        environment 'GRAPH_URL', System.getenv('GRAPH_URL') ?: "bolt://localhost:7687"
        environment 'NEO4J_REQUIRED', System.getenv('NEO4J_REQUIRED') ?: "false"
        reports {
            junitXml.enabled = true
            html.enabled = true
        }
        finalizedBy jacocoTestReport
    }
}