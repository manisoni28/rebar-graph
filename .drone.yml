kind: pipeline
name: default

services:
- name: neo4j
  image: neo4j
  environment:
    NEO4J_AUTH: "none"
    NEO4J_ACCEPT_LICENSE_AGREEMENT: "yes"

steps:
- name: build
  image: openjdk:8
  environment:
    GRAPH_URL: bolt://neo4j:7687
  commands:
  - env
  - pwd
  - ./gradlew dependencies
  - ./tools/wait-for-neo4j
  - ./gradlew clean check 